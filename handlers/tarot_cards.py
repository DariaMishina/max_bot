"""
–î–∞–Ω–Ω—ã–µ –∏ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∫–∞—Ä—Ç –¢–∞—Ä–æ ‚Äî –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è Max (aiomax).

–û—Ç–ª–∏—á–∏—è –æ—Ç Telegram-–≤–µ—Ä—Å–∏–∏:
- –í–º–µ—Å—Ç–æ aiogram FSInputFile / InlineKeyboardBuilder –∏—Å–ø–æ–ª—å–∑—É–µ–º aiomax.buttons.KeyboardBuilder
- –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º bot.upload_image() + attachments
"""
import random
import os
import logging
from typing import List, Dict, Tuple

import aiomax
from aiomax import buttons

# –°–ª–æ–≤–∞—Ä—å —Å –∫–∞—Ä—Ç–∞–º–∏ –¢–∞—Ä–æ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
TAROT_CARDS = {
    "00-TheFool": {"name": "–î—É—Ä–∞–∫", "meaning": "–ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ –ø—É—Ç–∏, –Ω–µ–≤–∏–Ω–Ω–æ—Å—Ç—å, —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç—å, –¥–æ–≤–µ—Ä–∏–µ –∫ –∂–∏–∑–Ω–∏"},
    "01-TheMagician": {"name": "–ú–∞–≥", "meaning": "–í–æ–ª—è, –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–æ–ø–ª–æ—â–∞—Ç—å –∏–¥–µ–∏ –≤ –∂–∏–∑–Ω—å"},
    "02-TheHighPriestess": {"name": "–í–µ—Ä—Ö–æ–≤–Ω–∞—è –ñ—Ä–∏—Ü–∞", "meaning": "–ò–Ω—Ç—É–∏—Ü–∏—è, —Ç–∞–π–Ω—ã–µ –∑–Ω–∞–Ω–∏—è, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –º—É–¥—Ä–æ—Å—Ç—å, –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ"},
    "03-TheEmpress": {"name": "–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞", "meaning": "–ü–ª–æ–¥–æ—Ä–æ–¥–∏–µ, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –º–∞—Ç–µ—Ä–∏–Ω—Å—Ç–≤–æ, –∏–∑–æ–±–∏–ª–∏–µ, –ø—Ä–∏—Ä–æ–¥–∞"},
    "04-TheEmperor": {"name": "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä", "meaning": "–í–ª–∞—Å—Ç—å, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç, –ª–∏–¥–µ—Ä—Å—Ç–≤–æ, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å"},
    "05-TheHierophant": {"name": "–ò–µ—Ä–æ—Ñ–∞–Ω—Ç", "meaning": "–¢—Ä–∞–¥–∏—Ü–∏–∏, –¥—É—Ö–æ–≤–Ω–æ–µ —É—á–µ–Ω–∏–µ, –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ, –∫–æ–Ω–≤–µ–Ω—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –º—É–¥—Ä–æ—Å—Ç—å"},
    "06-TheLovers": {"name": "–í–ª—é–±–ª–µ–Ω–Ω—ã–µ", "meaning": "–õ—é–±–æ–≤—å, –≤—ã–±–æ—Ä, –≥–∞—Ä–º–æ–Ω–∏—è, –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –µ–¥–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç–µ–π"},
    "07-TheChariot": {"name": "–ö–æ–ª–µ—Å–Ω–∏—Ü–∞", "meaning": "–ö–æ–Ω—Ç—Ä–æ–ª—å, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –≤–æ–ª—è, –ø–æ–±–µ–¥–∞, –¥–≤–∏–∂–µ–Ω–∏–µ –∫ —Ü–µ–ª–∏"},
    "08-Strength": {"name": "–°–∏–ª–∞", "meaning": "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏–ª–∞, —Ç–µ—Ä–ø–µ–Ω–∏–µ, —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —ç–º–æ—Ü–∏—è–º–∏"},
    "09-TheHermit": {"name": "–û—Ç—à–µ–ª—å–Ω–∏–∫", "meaning": "–ü–æ–∏—Å–∫ –∏—Å—Ç–∏–Ω—ã, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å–≤–µ—Ç, –º—É–¥—Ä–æ—Å—Ç—å, —É–µ–¥–∏–Ω–µ–Ω–∏–µ"},
    "10-WheelOfFortune": {"name": "–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã", "meaning": "–¶–∏–∫–ª—ã, –ø–µ—Ä–µ–º–µ–Ω—ã, —É–¥–∞—á–∞, —Å—É–¥—å–±–∞, –ø–æ–≤–æ—Ä–æ—Ç–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã"},
    "11-Justice": {"name": "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å", "meaning": "–ë–∞–ª–∞–Ω—Å, —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å, –ø—Ä–∞–≤–¥–∞, –∫–∞—Ä–º–∞, —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ"},
    "12-TheHangedMan": {"name": "–ü–æ–≤–µ—à–µ–Ω–Ω—ã–π", "meaning": "–ñ–µ—Ä—Ç–≤–∞, –æ–∂–∏–¥–∞–Ω–∏–µ, –Ω–æ–≤—ã–π –≤–∑–≥–ª—è–¥, –¥—É—Ö–æ–≤–Ω–æ–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ"},
    "13-Death": {"name": "–°–º–µ—Ä—Ç—å", "meaning": "–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –æ–∫–æ–Ω—á–∞–Ω–∏–µ, –Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ, –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ"},
    "14-Temperance": {"name": "–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å", "meaning": "–ë–∞–ª–∞–Ω—Å, —Ç–µ—Ä–ø–µ–Ω–∏–µ, –º–æ–¥–µ—Ä–∞—Ü–∏—è, –≥–∞—Ä–º–æ–Ω–∏—è, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ"},
    "15-TheDevil": {"name": "–î—å—è–≤–æ–ª", "meaning": "–ò–ª–ª—é–∑–∏–∏, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–º, –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ"},
    "16-TheTower": {"name": "–ë–∞—à–Ω—è", "meaning": "–í–Ω–µ–∑–∞–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω—ã, —Ä–∞–∑—Ä—É—à–µ–Ω–∏–µ, –æ—Ç–∫—Ä–æ–≤–µ–Ω–∏–µ, –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ"},
    "17-TheStar": {"name": "–ó–≤–µ–∑–¥–∞", "meaning": "–ù–∞–¥–µ–∂–¥–∞, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –¥—É—Ö–æ–≤–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ"},
    "18-TheMoon": {"name": "–õ—É–Ω–∞", "meaning": "–ò–ª–ª—é–∑–∏–∏, –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ, –∏–Ω—Ç—É–∏—Ü–∏—è, –æ–±–º–∞–Ω, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ü–∏–∫–ª—ã"},
    "19-TheSun": {"name": "–°–æ–ª–Ω—Ü–µ", "meaning": "–†–∞–¥–æ—Å—Ç—å, —É—Å–ø–µ—Ö, –∂–∏–∑–Ω–µ–Ω–Ω–∞—è —Å–∏–ª–∞, –æ–ø—Ç–∏–º–∏–∑–º, –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏–µ"},
    "20-Judgement": {"name": "–°—É–¥", "meaning": "–í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ, –ø—Ä–æ—â–µ–Ω–∏–µ, –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é, –¥—É—Ö–æ–≤–Ω–æ–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ"},
    "21-TheWorld": {"name": "–ú–∏—Ä", "meaning": "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ, —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å, —É—Å–ø–µ—Ö"},
    # –ö—É–±–∫–∏ (Cups)
    "Cups01": {"name": "–¢—É–∑ –ö—É–±–∫–æ–≤", "meaning": "–ù–æ–≤—ã–µ —á—É–≤—Å—Ç–≤–∞, –Ω–∞—á–∞–ª–æ –æ—Ç–Ω–æ—à–µ–Ω–∏–π, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ"},
    "Cups02": {"name": "–î–≤–æ–π–∫–∞ –ö—É–±–∫–æ–≤", "meaning": "–ü–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ, –≤–∑–∞–∏–º–Ω–∞—è –ª—é–±–æ–≤—å, –≥–∞—Ä–º–æ–Ω–∏—è –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö"},
    "Cups03": {"name": "–¢—Ä–æ–π–∫–∞ –ö—É–±–∫–æ–≤", "meaning": "–î—Ä—É–∂–±–∞, –≤–µ—Å–µ–ª—å–µ, –ø—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏–µ, —Ä–∞–¥–æ—Å—Ç—å"},
    "Cups04": {"name": "–ß–µ—Ç–≤–µ—Ä–∫–∞ –ö—É–±–∫–æ–≤", "meaning": "–ê–ø–∞—Ç–∏—è, —É–ø—É—â–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ—Ç—Å—Ç—Ä–∞–Ω–µ–Ω–Ω–æ—Å—Ç—å"},
    "Cups05": {"name": "–ü—è—Ç–µ—Ä–∫–∞ –ö—É–±–∫–æ–≤", "meaning": "–†–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ—Ç–µ—Ä—è, –≥—Ä—É—Å—Ç—å, —Ñ–æ–∫—É—Å –Ω–∞ –Ω–µ–≥–∞—Ç–∏–≤–µ"},
    "Cups06": {"name": "–®–µ—Å—Ç–µ—Ä–∫–∞ –ö—É–±–∫–æ–≤", "meaning": "–ù–æ—Å—Ç–∞–ª—å–≥–∏—è, –¥–µ—Ç—Å–∫–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è, –Ω–µ–≤–∏–Ω–Ω–æ—Å—Ç—å, –ø—Ä–æ—à–ª–æ–µ"},
    "Cups07": {"name": "–°–µ–º–µ—Ä–∫–∞ –ö—É–±–∫–æ–≤", "meaning": "–ò–ª–ª—é–∑–∏–∏, –º–µ—á—Ç—ã, –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è, –≤—ã–±–æ—Ä"},
    "Cups08": {"name": "–í–æ—Å—å–º–µ—Ä–∫–∞ –ö—É–±–∫–æ–≤", "meaning": "–£—Ö–æ–¥, –ø–æ–∏—Å–∫ –Ω–æ–≤–æ–≥–æ, –æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∞–¥–∏, –¥—É—Ö–æ–≤–Ω—ã–π –ø–æ–∏—Å–∫"},
    "Cups09": {"name": "–î–µ–≤—è—Ç–∫–∞ –ö—É–±–∫–æ–≤", "meaning": "–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∂–µ–ª–∞–Ω–∏–π, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≥–∞—Ä–º–æ–Ω–∏—è"},
    "Cups10": {"name": "–î–µ—Å—è—Ç–∫–∞ –ö—É–±–∫–æ–≤", "meaning": "–°–µ–º–µ–π–Ω–æ–µ —Å—á–∞—Å—Ç—å–µ, –≥–∞—Ä–º–æ–Ω–∏—è, –ø–æ–ª–Ω–∞—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è"},
    "Cups11": {"name": "–ü–∞–∂ –ö—É–±–∫–æ–≤", "meaning": "–¢–≤–æ—Ä—á–µ—Å–∫–æ–µ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –Ω–æ–≤—ã–µ —á—É–≤—Å—Ç–≤–∞, —Ä–æ–º–∞–Ω—Ç–∏—á–Ω–æ—Å—Ç—å"},
    "Cups12": {"name": "–†—ã—Ü–∞—Ä—å –ö—É–±–∫–æ–≤", "meaning": "–†–æ–º–∞–Ω—Ç–∏—á–Ω–æ—Å—Ç—å, –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å, —Å—Ç—Ä–∞—Å—Ç—å, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ"},
    "Cups13": {"name": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ö—É–±–∫–æ–≤", "meaning": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑—Ä–µ–ª–æ—Å—Ç—å, —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ, –∏–Ω—Ç—É–∏—Ü–∏—è, –ª—é–±–æ–≤—å"},
    "Cups14": {"name": "–ö–æ—Ä–æ–ª—å –ö—É–±–∫–æ–≤", "meaning": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å, –º—É–¥—Ä–æ—Å—Ç—å —á—É–≤—Å—Ç–≤, —Ç–≤–æ—Ä—á–µ—Å–∫–∞—è —Å–∏–ª–∞"},
    # –ü–µ–Ω—Ç–∞–∫–ª–∏ (Pentacles)
    "Pentacles01": {"name": "–¢—É–∑ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–π —É—Å–ø–µ—Ö, –Ω–∞—á–∞–ª–æ –∏–∑–æ–±–∏–ª–∏—è"},
    "Pentacles02": {"name": "–î–≤–æ–π–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–ë–∞–ª–∞–Ω—Å —Ä–µ—Å—É—Ä—Å–æ–≤, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã, –∞–¥–∞–ø—Ç–∞—Ü–∏—è, –∂–æ–Ω–≥–ª–∏—Ä–æ–≤–∞–Ω–∏–µ"},
    "Pentacles03": {"name": "–¢—Ä–æ–π–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, –æ–±—É—á–µ–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥–µ"},
    "Pentacles04": {"name": "–ß–µ—Ç–≤–µ—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –∫–æ–Ω—Ç—Ä–æ–ª—å, –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ"},
    "Pentacles05": {"name": "–ü—è—Ç–µ—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏, –±–µ–¥–Ω–æ—Å—Ç—å, –ø–æ—Ç–µ—Ä—è, —Ç—Ä–µ–≤–æ–≥–∞"},
    "Pentacles06": {"name": "–®–µ—Å—Ç–µ—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–©–µ–¥—Ä–æ—Å—Ç—å, –ø–æ–º–æ—â—å, –æ—Ç–¥–∞—á–∞, –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"},
    "Pentacles07": {"name": "–°–µ–º–µ—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–¢–µ—Ä–ø–µ–Ω–∏–µ, –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏, —É–ø–æ—Ä–Ω—ã–π —Ç—Ä—É–¥, —Ä–æ—Å—Ç"},
    "Pentacles08": {"name": "–í–æ—Å—å–º–µ—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, —Ä–µ–º–µ—Å–ª–æ, —É–ø–æ—Ä–Ω—ã–π —Ç—Ä—É–¥, —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏–µ"},
    "Pentacles09": {"name": "–î–µ–≤—è—Ç–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–ú–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µ, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —É—Å–ø–µ—Ö"},
    "Pentacles10": {"name": "–î–µ—Å—è—Ç–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –±–æ–≥–∞—Ç—Å—Ç–≤–æ, —Å–µ–º–µ–π–Ω–æ–µ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–æ"},
    "Pentacles11": {"name": "–ü–∞–∂ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –æ–±—É—á–µ–Ω–∏–µ, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª, –ø–æ–∏—Å–∫"},
    "Pentacles12": {"name": "–†—ã—Ü–∞—Ä—å –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–¢—Ä—É–¥–æ–ª—é–±–∏–µ, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, —É–ø–æ—Ä—Å—Ç–≤–æ, –¥–≤–∏–∂–µ–Ω–∏–µ –∫ —Ü–µ–ª–∏"},
    "Pentacles13": {"name": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–ü—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å, –∏–∑–æ–±–∏–ª–∏–µ, –∑–∞–±–æ—Ç–∞, –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–∞—è –º—É–¥—Ä–æ—Å—Ç—å"},
    "Pentacles14": {"name": "–ö–æ—Ä–æ–ª—å –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "meaning": "–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –ª–∏–¥–µ—Ä—Å—Ç–≤–æ, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, —É—Å–ø–µ—Ö"},
    # –ú–µ—á–∏ (Swords)
    "Swords01": {"name": "–¢—É–∑ –ú–µ—á–µ–π", "meaning": "–ù–æ–≤—ã–µ –∏–¥–µ–∏, —è—Å–Ω–æ—Å—Ç—å —É–º–∞, –ø—Ä–æ—Ä—ã–≤, –ø—Ä–∞–≤–¥–∞"},
    "Swords02": {"name": "–î–≤–æ–π–∫–∞ –ú–µ—á–µ–π", "meaning": "–¢—Ä—É–¥–Ω—ã–π –≤—ã–±–æ—Ä, –±–∞–ª–∞–Ω—Å, –∫–æ–º–ø—Ä–æ–º–∏—Å—Å, –∏–∑–±–µ–≥–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è"},
    "Swords03": {"name": "–¢—Ä–æ–π–∫–∞ –ú–µ—á–µ–π", "meaning": "–†–∞–∑–±–∏—Ç–æ–µ —Å–µ—Ä–¥—Ü–µ, –±–æ–ª—å, –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –±–æ–ª—å"},
    "Swords04": {"name": "–ß–µ—Ç–≤–µ—Ä–∫–∞ –ú–µ—á–µ–π", "meaning": "–û—Ç–¥—ã—Ö, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –º–µ–¥–∏—Ç–∞—Ü–∏—è, –ø–æ–∫–æ–π"},
    "Swords05": {"name": "–ü—è—Ç–µ—Ä–∫–∞ –ú–µ—á–µ–π", "meaning": "–ö–æ–Ω—Ñ–ª–∏–∫—Ç, –ø–æ—Ä–∞–∂–µ–Ω–∏–µ, –Ω–µ—á–µ—Å—Ç–Ω–æ—Å—Ç—å, —Ä–∞–∑–¥–æ—Ä"},
    "Swords06": {"name": "–®–µ—Å—Ç–µ—Ä–∫–∞ –ú–µ—á–µ–π", "meaning": "–ü–µ—Ä–µ—Ö–æ–¥, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, –ø—É—Ç—å –∫ –ª—É—á—à–µ–º—É, –±–µ–≥—Å—Ç–≤–æ"},
    "Swords07": {"name": "–°–µ–º–µ—Ä–∫–∞ –ú–µ—á–µ–π", "meaning": "–û–±–º–∞–Ω, –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –≤–æ—Ä–æ–≤—Å—Ç–≤–æ, –æ–±—Ö–æ–¥ –ø—Ä–æ–±–ª–µ–º—ã"},
    "Swords08": {"name": "–í–æ—Å—å–º–µ—Ä–∫–∞ –ú–µ—á–µ–π", "meaning": "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –ª–æ–≤—É—à–∫–∞, —Å–∞–º–æ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ, –±–µ—Å–ø–æ–º–æ—â–Ω–æ—Å—Ç—å"},
    "Swords09": {"name": "–î–µ–≤—è—Ç–∫–∞ –ú–µ—á–µ–π", "meaning": "–¢—Ä–µ–≤–æ–≥–∞, –∫–æ—à–º–∞—Ä—ã, –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ, —Å—Ç—Ä–∞—Ö–∏"},
    "Swords10": {"name": "–î–µ—Å—è—Ç–∫–∞ –ú–µ—á–µ–π", "meaning": "–ö–æ–Ω–µ—Ü, –ø–æ—Ä–∞–∂–µ–Ω–∏–µ, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –Ω–æ–≤–∞—è —Ç–æ—á–∫–∞ –æ—Ç—Å—á–µ—Ç–∞"},
    "Swords11": {"name": "–ü–∞–∂ –ú–µ—á–µ–π", "meaning": "–ù–æ–≤—ã–µ –∏–¥–µ–∏, –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å, –æ–±—É—á–µ–Ω–∏–µ"},
    "Swords12": {"name": "–†—ã—Ü–∞—Ä—å –ú–µ—á–µ–π", "meaning": "–î–µ–π—Å—Ç–≤–∏–µ, —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –±—ã—Å—Ç—Ä–æ—Ç–∞, –∏–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å"},
    "Swords13": {"name": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ú–µ—á–µ–π", "meaning": "–Ø—Å–Ω–æ—Å—Ç—å, –ø—Ä–∞–≤–¥–∏–≤–æ—Å—Ç—å, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –æ—Å—Ç—Ä—ã–π —É–º"},
    "Swords14": {"name": "–ö–æ—Ä–æ–ª—å –ú–µ—á–µ–π", "meaning": "–ú—É–¥—Ä–æ—Å—Ç—å, –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å, –ª–∏–¥–µ—Ä—Å—Ç–≤–æ"},
    # –ñ–µ–∑–ª—ã (Wands)
    "Wands01": {"name": "–¢—É–∑ –ñ–µ–∑–ª–æ–≤", "meaning": "–ù–æ–≤—ã–µ –Ω–∞—á–∏–Ω–∞–Ω–∏—è, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, —ç–Ω–µ—Ä–≥–∏—è, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª"},
    "Wands02": {"name": "–î–≤–æ–π–∫–∞ –ñ–µ–∑–ª–æ–≤", "meaning": "–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –±—É–¥—É—â–µ–µ, –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ"},
    "Wands03": {"name": "–¢—Ä–æ–π–∫–∞ –ñ–µ–∑–ª–æ–≤", "meaning": "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –≤–∏–¥–µ–Ω–∏–µ, –¥–∞–ª—å–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—å, –æ–∂–∏–¥–∞–Ω–∏–µ"},
    "Wands04": {"name": "–ß–µ—Ç–≤–µ—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", "meaning": "–ü—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏–µ, –≥–∞—Ä–º–æ–Ω–∏—è, –¥–æ–º, —Å–æ–æ–±—â–µ—Å—Ç–≤–æ"},
    "Wands05": {"name": "–ü—è—Ç–µ—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", "meaning": "–ö–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è, –∫–æ–Ω—Ñ–ª–∏–∫—Ç, —Å–ø–æ—Ä—ã, —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è"},
    "Wands06": {"name": "–®–µ—Å—Ç–µ—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", "meaning": "–ü–æ–±–µ–¥–∞, —É—Å–ø–µ—Ö, –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ"},
    "Wands07": {"name": "–°–µ–º–µ—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", "meaning": "–ó–∞—â–∏—Ç–∞, –≤—ã–∑–æ–≤, –æ—Ç—Å—Ç–∞–∏–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è"},
    "Wands08": {"name": "–í–æ—Å—å–º–µ—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", "meaning": "–ë—ã—Å—Ç—Ä–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –ø—Ä–æ–≥—Ä–µ—Å—Å, —Å–∫–æ—Ä–æ—Å—Ç—å, –¥–µ–π—Å—Ç–≤–∏—è"},
    "Wands09": {"name": "–î–µ–≤—è—Ç–∫–∞ –ñ–µ–∑–ª–æ–≤", "meaning": "–£–ø–æ—Ä—Å—Ç–≤–æ, –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å, —Å—Ç–æ–π–∫–æ—Å—Ç—å, –ø–æ—á—Ç–∏ —É —Ü–µ–ª–∏"},
    "Wands10": {"name": "–î–µ—Å—è—Ç–∫–∞ –ñ–µ–∑–ª–æ–≤", "meaning": "–ë—Ä–µ–º—è, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞, –¥–∞–≤–ª–µ–Ω–∏–µ"},
    "Wands11": {"name": "–ü–∞–∂ –ñ–µ–∑–ª–æ–≤", "meaning": "–≠–Ω—Ç—É–∑–∏–∞–∑–º, –Ω–æ–≤—ã–µ –∏–¥–µ–∏, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, —ç–Ω–µ—Ä–≥–∏—è"},
    "Wands12": {"name": "–†—ã—Ü–∞—Ä—å –ñ–µ–∑–ª–æ–≤", "meaning": "–°—Ç—Ä–∞—Å—Ç—å, –¥–µ–π—Å—Ç–≤–∏–µ, –∞–≤–∞–Ω—Ç—é—Ä–∏–∑–º, –∏–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å"},
    "Wands13": {"name": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ñ–µ–∑–ª–æ–≤", "meaning": "–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —Ç–≤–æ—Ä—á–µ—Å–∫–∞—è —Å–∏–ª–∞, —Ö–∞—Ä–∏–∑–º–∞"},
    "Wands14": {"name": "–ö–æ—Ä–æ–ª—å –ñ–µ–∑–ª–æ–≤", "meaning": "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ, –≤–∏–¥–µ–Ω–∏–µ, –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ"}
}


def get_random_cards(count: int = 3) -> List[str]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ –∫–∞—Ä—Ç—ã –¢–∞—Ä–æ"""
    return random.sample(list(TAROT_CARDS.keys()), count)


def get_card_info(card_id: str) -> Dict[str, str]:
    """–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞—Ä—Ç–µ"""
    return TAROT_CARDS.get(card_id, {"name": "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞", "meaning": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞"})


def create_card_selection_keyboard(selected_cards: List[str] = None) -> buttons.KeyboardBuilder:
    """–°–æ–∑–¥–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç (CallbackButton –¥–ª—è aiomax)"""
    if selected_cards is None:
        selected_cards = []
    
    available_cards = get_random_cards(8)
    
    kb = buttons.KeyboardBuilder()
    
    for i, card_id in enumerate(available_cards):
        card_info = get_card_info(card_id)
        button_text = f"üÉè {card_info['name']}"
        
        if card_id in selected_cards:
            button_text = f"‚úÖ {card_info['name']}"
        
        kb.row(buttons.CallbackButton(button_text, f"select_card_{card_id}"))
    
    if len(selected_cards) == 3:
        kb.row(buttons.CallbackButton("üîÆ –ü–æ–ª—É—á–∏—Ç—å –≥–∞–¥–∞–Ω–∏–µ", "confirm_cards"))
    
    kb.row(buttons.CallbackButton("‚ùå –û—Ç–º–µ–Ω–∞", "cancel_cards"))
    return kb


def get_all_available_cards() -> List[str]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞—Ä—Ç –∏–∑ –ø–∞–ø–∫–∏ static/images/"""
    cards = []
    images_dir = "static/images"
    if os.path.exists(images_dir):
        for filename in os.listdir(images_dir):
            if filename.endswith('.png') and filename != 'CardBacks.png':
                card_id = filename[:-4]
                cards.append(card_id)
    return cards


def get_card_image_path(card_id: str) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –∫–∞—Ä—Ç—ã"""
    return f"static/images/{card_id}.png"


def combine_cards_image(card_ids: List[str]) -> str:
    """–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –∫–∞—Ä—Ç—ã –≤ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –≤ —Ä—è–¥)"""
    try:
        from PIL import Image
    except ImportError:
        logging.error("PIL (Pillow) –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: pip install Pillow")
        raise ImportError("PIL (Pillow) –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    
    images = []
    for card_id in card_ids:
        image_path = get_card_image_path(card_id)
        if os.path.exists(image_path):
            img = Image.open(image_path)
            images.append(img)
        else:
            logging.warning(f"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã {card_id} –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
            return None
    
    if not images:
        return None
    
    card_width, card_height = images[0].size
    combined_width = card_width * len(images)
    combined_height = card_height
    
    combined_image = Image.new('RGB', (combined_width, combined_height), (255, 255, 255))
    
    x_offset = 0
    for img in images:
        if img.mode == 'RGBA':
            background = Image.new('RGB', img.size, (255, 255, 255))
            background.paste(img, mask=img.split()[3])
            img = background
        elif img.mode != 'RGB':
            img = img.convert('RGB')
        
        combined_image.paste(img, (x_offset, 0))
        x_offset += card_width
    
    import tempfile
    temp_file = tempfile.NamedTemporaryFile(delete=False, suffix='.png')
    temp_path = temp_file.name
    temp_file.close()
    
    combined_image.save(temp_path, 'PNG')
    return temp_path


async def send_card_images(bot: aiomax.Bot, chat_id: int, card_ids: List[str], as_media_group: bool = False) -> None:
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç –≤ –±–æ—Ç–µ Max
    
    Args:
        bot: –≠–∫–∑–µ–º–ø–ª—è—Ä aiomax.Bot
        chat_id: ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        card_ids: –°–ø–∏—Å–æ–∫ ID –∫–∞—Ä—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        as_media_group: –ï—Å–ª–∏ True, –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∫–∞—Ä—Ç—ã –≤ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    """
    if not card_ids:
        return
    
    if as_media_group:
        combined_image_path = combine_cards_image(card_ids)
        
        if combined_image_path and os.path.exists(combined_image_path):
            try:
                attachment = await bot.upload_image(combined_image_path)
                await bot.send_message(None, chat_id=chat_id, attachments=attachment)
            finally:
                try:
                    os.unlink(combined_image_path)
                except Exception as e:
                    logging.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª {combined_image_path}: {e}")
        else:
            logging.error("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç")
    else:
        for card_id in card_ids:
            image_path = get_card_image_path(card_id)
            if os.path.exists(image_path):
                attachment = await bot.upload_image(image_path)
                await bot.send_message(None, chat_id=chat_id, attachments=attachment)
            else:
                logging.warning(f"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã {card_id} –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ –ø—É—Ç–∏ {image_path}")


def interpret_cards(cards: List[str], question: str) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã"""
    interpretations = []
    
    for i, card_id in enumerate(cards, 1):
        card_info = get_card_info(card_id)
        position = ["–ü—Ä–æ—à–ª–æ–µ", "–ù–∞—Å—Ç–æ—è—â–µ–µ", "–ë—É–¥—É—â–µ–µ"][i-1]
        
        interpretations.append(
            f"<b>{position}: {card_info['name']}</b>\n"
            f"{card_info['meaning']}\n"
        )
    
    return "\n".join(interpretations)
